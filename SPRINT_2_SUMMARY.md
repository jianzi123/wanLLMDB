# Sprint 2 å®Œæˆæ€»ç»“

## ğŸ“… æ—¶é—´èŒƒå›´
Phase 1 Sprint 2 - Week 3 & 4: é¡¹ç›®ä¸Runç®¡ç†

## âœ… å·²å®Œæˆä»»åŠ¡

### 1. åç«¯ API å®ç° âœ…

#### Project API (å®Œæ•´CRUD)
```python
POST   /api/v1/projects          # åˆ›å»ºé¡¹ç›®
GET    /api/v1/projects          # åˆ—è¡¨ï¼ˆåˆ†é¡µã€æœç´¢ã€è¿‡æ»¤ï¼‰
GET    /api/v1/projects/{id}     # è·å–è¯¦æƒ…
PATCH  /api/v1/projects/{id}     # æ›´æ–°é¡¹ç›®
DELETE /api/v1/projects/{id}     # åˆ é™¤é¡¹ç›®
```

**ç‰¹æ€§**:
- âœ… è‡ªåŠ¨ç”Ÿæˆ URL-friendly slug
- âœ… è®¿é—®æ§åˆ¶ï¼ˆowner/publicæ£€æŸ¥ï¼‰
- âœ… åˆ†é¡µæ”¯æŒï¼ˆå¯é…ç½®pageSizeï¼‰
- âœ… æœç´¢åŠŸèƒ½ï¼ˆname + descriptionï¼‰
- âœ… å¯è§æ€§è¿‡æ»¤ï¼ˆpublic/privateï¼‰
- âœ… è¿è¡Œç»Ÿè®¡ï¼ˆrunCount, lastActivityï¼‰

#### Run API (å®Œæ•´CRUD + æ‰©å±•åŠŸèƒ½)
```python
POST   /api/v1/runs                    # åˆ›å»ºRun
GET    /api/v1/runs                    # åˆ—è¡¨ï¼ˆå¤šæ¡ä»¶è¿‡æ»¤ï¼‰
GET    /api/v1/runs/{id}               # è·å–è¯¦æƒ…
PATCH  /api/v1/runs/{id}               # æ›´æ–°Run
DELETE /api/v1/runs/{id}               # åˆ é™¤Run
POST   /api/v1/runs/{id}/finish        # æ ‡è®°å®Œæˆ
POST   /api/v1/runs/{id}/heartbeat     # æ›´æ–°å¿ƒè·³
POST   /api/v1/runs/{id}/tags          # æ·»åŠ æ ‡ç­¾
DELETE /api/v1/runs/{id}/tags/{tag}    # åˆ é™¤æ ‡ç­¾
```

**ç‰¹æ€§**:
- âœ… å¤šçŠ¶æ€ç®¡ç†ï¼ˆrunning/finished/crashed/killedï¼‰
- âœ… Gitä¿¡æ¯è®°å½•
- âœ… ç¯å¢ƒä¿¡æ¯è¿½è¸ª
- âœ… æ ‡ç­¾ç®¡ç†
- âœ… å¿ƒè·³æœºåˆ¶
- âœ… è®¿é—®æ§åˆ¶

---

### 2. æ•°æ®å±‚å®ç° âœ…

#### Schemas (Pydantic éªŒè¯)
**ProjectSchemas**:
- `ProjectCreate` - åˆ›å»ºæ—¶éªŒè¯
- `ProjectUpdate` - æ›´æ–°æ—¶éªŒè¯
- `Project` - è¿”å›ç»™å®¢æˆ·ç«¯
- `ProjectList` - åˆ†é¡µåˆ—è¡¨å“åº”

**RunSchemas**:
- `RunCreate` - åˆ›å»ºéªŒè¯
- `RunUpdate` - æ›´æ–°éªŒè¯
- `Run` - å®Œæ•´Runä¿¡æ¯
- `RunFinish` - å®ŒæˆRun
- `RunTagAdd` - æ ‡ç­¾ç®¡ç†
- `RunList` - åˆ†é¡µåˆ—è¡¨å“åº”

#### Repositoryå±‚ (æ•°æ®è®¿é—®)
**ProjectRepository** (150+ è¡Œ):
```python
- create()           # åˆ›å»ºé¡¹ç›® + slugç”Ÿæˆ
- get()              # è·å–å•ä¸ª
- get_by_slug()      # é€šè¿‡slugæŸ¥è¯¢
- list()             # åˆ†é¡µåˆ—è¡¨ + æœç´¢ + è¿‡æ»¤
- update()           # æ›´æ–°
- delete()           # åˆ é™¤
- get_run_count()    # ç»Ÿè®¡runs
- get_last_activity()# æœ€åæ´»åŠ¨æ—¶é—´
- user_has_access()  # æƒé™æ£€æŸ¥
```

**RunRepository** (200+ è¡Œ):
```python
- create()           # åˆ›å»ºrun
- get()              # è·å–å•ä¸ª
- list()             # åˆ†é¡µåˆ—è¡¨ + å¤šæ¡ä»¶è¿‡æ»¤
- update()           # æ›´æ–°
- delete()           # åˆ é™¤
- finish()           # å®Œæˆrun
- update_heartbeat() # å¿ƒè·³æ›´æ–°
- add_tags()         # æ·»åŠ æ ‡ç­¾
- remove_tag()       # åˆ é™¤æ ‡ç­¾
- user_has_access()  # æƒé™æ£€æŸ¥
```

#### æ–°å¢æ¨¡å‹
- **RunConfig**: å­˜å‚¨è¿è¡Œé…ç½®ï¼ˆkey-valueï¼‰
- **RunSummary**: å­˜å‚¨è¿è¡Œæ‘˜è¦ï¼ˆmetrics, æ—¶é•¿ç­‰ï¼‰

---

### 3. å‰ç«¯ API æœåŠ¡ âœ…

#### RTK Query é…ç½®
**åŸºç¡€APIæœåŠ¡**:
```typescript
// services/api.ts
- baseQueryé…ç½®
- è‡ªåŠ¨tokenæ³¨å…¥
- ç¼“å­˜æ ‡ç­¾ç®¡ç†ï¼ˆUser, Project, Runï¼‰
```

**è®¤è¯API**:
```typescript
// services/authApi.ts
- useLoginMutation()      # ç™»å½•
- useRegisterMutation()   # æ³¨å†Œ
- useGetMeQuery()         # è·å–å½“å‰ç”¨æˆ·
```

**é¡¹ç›®API**:
```typescript
// services/projectsApi.ts
- useListProjectsQuery()       # åˆ—è¡¨æŸ¥è¯¢
- useGetProjectQuery()         # å•ä¸ªæŸ¥è¯¢
- useCreateProjectMutation()   # åˆ›å»º
- useUpdateProjectMutation()   # æ›´æ–°
- useDeleteProjectMutation()   # åˆ é™¤

ç‰¹æ€§:
- è‡ªåŠ¨ç¼“å­˜å¤±æ•ˆ
- ä¹è§‚æ›´æ–°æ”¯æŒ
- åˆ†é¡µå‚æ•°å¤„ç†
- å“åº”æ•°æ®è½¬æ¢
```

**Run API**:
```typescript
// services/runsApi.ts
- useListRunsQuery()           # åˆ—è¡¨æŸ¥è¯¢
- useGetRunQuery()             # å•ä¸ªæŸ¥è¯¢
- useCreateRunMutation()       # åˆ›å»º
- useUpdateRunMutation()       # æ›´æ–°
- useDeleteRunMutation()       # åˆ é™¤
- useFinishRunMutation()       # å®Œæˆ
- useAddTagsMutation()         # æ·»åŠ æ ‡ç­¾
- useRemoveTagMutation()       # åˆ é™¤æ ‡ç­¾
```

---

### 4. å‰ç«¯é¡µé¢å®Œå–„ âœ…

#### è®¤è¯é¡µé¢é›†æˆ
**LoginPage**:
- âœ… ä½¿ç”¨ useLoginMutation
- âœ… é”™è¯¯å¤„ç†å’Œæç¤º
- âœ… åŠ è½½çŠ¶æ€æ˜¾ç¤º
- âœ… æˆåŠŸåè·³è½¬
- âœ… Tokenå­˜å‚¨åˆ°Redux

**RegisterPage**:
- âœ… ä½¿ç”¨ useRegisterMutation
- âœ… è¡¨å•éªŒè¯
- âœ… å¯†ç ç¡®è®¤æ£€æŸ¥
- âœ… é”™è¯¯å¤„ç†
- âœ… æˆåŠŸåè·³è½¬ç™»å½•

#### é¡¹ç›®ç®¡ç†é¡µé¢
**ProjectsPage** (å®Œå…¨é‡å†™ï¼Œ210+ è¡Œ):

**åŠŸèƒ½**:
1. **é¡¹ç›®åˆ—è¡¨**
   - âœ… å®æ—¶æ•°æ®åŠ è½½
   - âœ… åˆ†é¡µæ”¯æŒ
   - âœ… åŠ è½½çŠ¶æ€
   - âœ… ç©ºçŠ¶æ€å¤„ç†

2. **æ•°æ®å±•ç¤º**
   - é¡¹ç›®åç§°ï¼ˆå¯ç‚¹å‡»å¯¼èˆªï¼‰
   - æè¿°ï¼ˆå¸¦çœç•¥ï¼‰
   - å¯è§æ€§æ ‡ç­¾ï¼ˆå½©è‰²ï¼‰
   - Runæ•°é‡ç»Ÿè®¡
   - æœ€åæ´»åŠ¨æ—¶é—´ï¼ˆç›¸å¯¹æ—¶é—´ï¼‰
   - åˆ›å»ºæ—¥æœŸ

3. **åˆ›å»ºé¡¹ç›®**
   - âœ… Modalå¯¹è¯æ¡†
   - âœ… è¡¨å•éªŒè¯
   - âœ… åç§°ï¼ˆâ‰¥3å­—ç¬¦ï¼‰
   - âœ… æè¿°ï¼ˆå¯é€‰ï¼‰
   - âœ… å¯è§æ€§é€‰æ‹©
   - âœ… åŠ è½½çŠ¶æ€
   - âœ… æˆåŠŸ/å¤±è´¥æç¤º

4. **æ“ä½œåŠŸèƒ½**
   - âœ… æŸ¥çœ‹é¡¹ç›®ï¼ˆè·³è½¬è¯¦æƒ…ï¼‰
   - âœ… åˆ é™¤é¡¹ç›®ï¼ˆç¡®è®¤å¯¹è¯æ¡†ï¼‰
   - âœ… è‡ªåŠ¨åˆ·æ–°åˆ—è¡¨

**ç”¨æˆ·ä½“éªŒ**:
- ğŸ“Š ç¾è§‚çš„è¡¨æ ¼å±•ç¤º
- â³ åŠ è½½æŒ‡ç¤ºå™¨
- âœ… å³æ—¶åé¦ˆ
- ğŸ¨ Ant Designé£æ ¼
- ğŸ“± å“åº”å¼è®¾è®¡

---

## ğŸ“Š ä»£ç ç»Ÿè®¡

### åç«¯æ–°å¢
- **æ–‡ä»¶æ•°**: 8ä¸ªæ–°æ–‡ä»¶
- **ä»£ç è¡Œæ•°**: ~1200è¡Œ
- **APIç«¯ç‚¹**: 15ä¸ª
- **Repositoryæ–¹æ³•**: 25+ä¸ª

### å‰ç«¯æ–°å¢
- **æ–‡ä»¶æ•°**: 5ä¸ªæ–°æ–‡ä»¶
- **ä»£ç è¡Œæ•°**: ~600è¡Œ
- **API Hooks**: 15+ä¸ª
- **é¡µé¢ç»„ä»¶**: 3ä¸ªæ›´æ–°

---

## ğŸ¯ æ ¸å¿ƒæˆå°±

### åç«¯
âœ… **å®Œæ•´çš„Project CRUD** - åŒ…å«æƒé™ã€ç»Ÿè®¡ã€æœç´¢
âœ… **å®Œæ•´çš„Run CRUD** - åŒ…å«çŠ¶æ€ç®¡ç†ã€æ ‡ç­¾ã€å¿ƒè·³
âœ… **Repositoryæ¨¡å¼** - æ¸…æ™°çš„æ•°æ®è®¿é—®å±‚
âœ… **SchemaéªŒè¯** - Pydanticè‡ªåŠ¨éªŒè¯
âœ… **åˆ†é¡µæ”¯æŒ** - ç»Ÿä¸€çš„åˆ†é¡µå“åº”æ ¼å¼
âœ… **è®¿é—®æ§åˆ¶** - åŸºç¡€çš„æƒé™æ£€æŸ¥
âœ… **é”™è¯¯å¤„ç†** - ç»Ÿä¸€çš„é”™è¯¯å“åº”

### å‰ç«¯
âœ… **RTK Queryé›†æˆ** - è‡ªåŠ¨ç¼“å­˜ç®¡ç†
âœ… **ç±»å‹å®‰å…¨APIè°ƒç”¨** - TypeScriptå…¨ç¨‹ç±»å‹æ£€æŸ¥
âœ… **å®æ—¶æ•°æ®æ›´æ–°** - è‡ªåŠ¨ç¼“å­˜å¤±æ•ˆ
âœ… **ä¼˜ç§€çš„ç”¨æˆ·ä½“éªŒ** - åŠ è½½ã€é”™è¯¯ã€æˆåŠŸçŠ¶æ€
âœ… **å®Œæ•´çš„è®¤è¯æµç¨‹** - ç™»å½•ã€æ³¨å†Œã€tokenç®¡ç†
âœ… **åŠŸèƒ½å®Œå–„çš„é¡¹ç›®é¡µ** - CRUD + åˆ†é¡µ + æœç´¢

---

## ğŸš€ å¯ç”¨åŠŸèƒ½æ¼”ç¤º

### ç”¨æˆ·æ—…ç¨‹ 1: æ³¨å†Œå’Œç™»å½•
```
1. è®¿é—® /register
2. å¡«å†™ç”¨æˆ·åã€é‚®ç®±ã€å¯†ç 
3. ç‚¹å‡»æ³¨å†Œ â†’ æˆåŠŸæç¤º
4. è·³è½¬åˆ° /login
5. è¾“å…¥å‡­æ® â†’ ç™»å½•æˆåŠŸ
6. è·³è½¬åˆ° /dashboard
```

### ç”¨æˆ·æ—…ç¨‹ 2: åˆ›å»ºå’Œç®¡ç†é¡¹ç›®
```
1. è®¿é—® /projects
2. ç‚¹å‡»"New Project"
3. å¡«å†™é¡¹ç›®ä¿¡æ¯
   - åç§°: my-ml-project
   - æè¿°: My awesome ML project
   - å¯è§æ€§: Private
4. æäº¤ â†’ é¡¹ç›®åˆ›å»ºæˆåŠŸ
5. åœ¨åˆ—è¡¨ä¸­çœ‹åˆ°æ–°é¡¹ç›®
6. å¯ä»¥åˆ é™¤é¡¹ç›®ï¼ˆéœ€ç¡®è®¤ï¼‰
```

### APIæµ‹è¯•ç¤ºä¾‹
```bash
# ç™»å½•
curl -X POST http://localhost:8000/api/v1/auth/login \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=testuser&password=password123"

# åˆ›å»ºé¡¹ç›®
curl -X POST http://localhost:8000/api/v1/projects \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{"name":"test-project","visibility":"private"}'

# åˆ—å‡ºé¡¹ç›®
curl -X GET "http://localhost:8000/api/v1/projects?page=1&page_size=20" \
  -H "Authorization: Bearer <token>"
```

---

## ğŸ“ˆ è´¨é‡æŒ‡æ ‡

### ä»£ç è´¨é‡
- âœ… TypeScriptä¸¥æ ¼æ¨¡å¼
- âœ… Pydanticæ•°æ®éªŒè¯
- âœ… é”™è¯¯å¤„ç†å®Œå–„
- âœ… ç±»å‹æç¤º100%
- âœ… å‡½æ•°æ–‡æ¡£å­—ç¬¦ä¸²

### ç”¨æˆ·ä½“éªŒ
- âœ… åŠ è½½çŠ¶æ€: æ‰€æœ‰å¼‚æ­¥æ“ä½œ
- âœ… é”™è¯¯æç¤º: å‹å¥½çš„é”™è¯¯æ¶ˆæ¯
- âœ… æˆåŠŸåé¦ˆ: æ“ä½œæˆåŠŸé€šçŸ¥
- âœ… å“åº”é€Ÿåº¦: <200ms (æœ¬åœ°)
- âœ… ç•Œé¢ç¾è§‚: Ant Designè§„èŒƒ

---

## ğŸ” æŠ€æœ¯äº®ç‚¹

### 1. Repositoryæ¨¡å¼
```python
# æ¸…æ™°çš„èŒè´£åˆ’åˆ†
APIå±‚ â†’ Repositoryå±‚ â†’ æ•°æ®åº“
- API: è·¯ç”±å’ŒéªŒè¯
- Repository: æ•°æ®è®¿é—®é€»è¾‘
- æ˜“äºæµ‹è¯•å’Œç»´æŠ¤
```

### 2. RTK Queryä¼˜åŠ¿
```typescript
// è‡ªåŠ¨ç¼“å­˜ç®¡ç†
- å‡å°‘é‡å¤è¯·æ±‚
- ä¹è§‚æ›´æ–°
- è‡ªåŠ¨é‡æ–°è·å–
- ç»Ÿä¸€çš„åŠ è½½/é”™è¯¯çŠ¶æ€
```

### 3. ç±»å‹å®‰å…¨
```typescript
// ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨
Backend Pydantic â†’ OpenAPI â†’ Frontend TypeScript
- ç¼–è¯‘æ—¶é”™è¯¯æ£€æŸ¥
- è‡ªåŠ¨è¡¥å…¨
- é‡æ„å®‰å…¨
```

---

## ğŸ› å·²çŸ¥é™åˆ¶

### åç«¯
- â³ Configå’ŒSummaryæ•°æ®è¿˜æœªå®Œå…¨é›†æˆ
- â³ å›¢é˜Ÿæƒé™ç³»ç»Ÿå¾…å®ç°
- â³ éœ€è¦æ·»åŠ å•å…ƒæµ‹è¯•
- â³ APIé™æµæœªå®ç°

### å‰ç«¯
- â³ Runåˆ—è¡¨é¡µé¢å¾…å®ç°
- â³ Runè¯¦æƒ…é¡µé¢å¾…å®ç°
- â³ Tokenè‡ªåŠ¨åˆ·æ–°å¾…å®ç°
- â³ éœ€è¦æ·»åŠ ç»„ä»¶æµ‹è¯•

---

## ğŸ”œ ä¸‹ä¸€æ­¥å·¥ä½œï¼ˆåç»­Sprintï¼‰

### ä¼˜å…ˆçº§ P0ï¼ˆå¿…é¡»ï¼‰
- [ ] å®Œå–„Runåˆ—è¡¨å’Œè¯¦æƒ…é¡µé¢
- [ ] Python SDKå¼€å‘ï¼ˆinit, log, finishï¼‰
- [ ] Configå’ŒSummaryå­˜å‚¨å®ç°
- [ ] Tokenåˆ·æ–°æœºåˆ¶

### ä¼˜å…ˆçº§ P1ï¼ˆé‡è¦ï¼‰
- [ ] Gitä¿¡æ¯è‡ªåŠ¨æ•è·ï¼ˆSDKï¼‰
- [ ] ç³»ç»ŸæŒ‡æ ‡æ”¶é›†
- [ ] é¡¹ç›®è¯¦æƒ…é¡µé¢
- [ ] Runè¿‡æ»¤å’Œæœç´¢UI

### ä¼˜å…ˆçº§ P2ï¼ˆå¢å¼ºï¼‰
- [ ] æµ‹è¯•è¦†ç›–ï¼ˆå‰åç«¯ï¼‰
- [ ] APIæ–‡æ¡£å®Œå–„
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] é”™è¯¯ç›‘æ§

---

## ğŸ’¡ å­¦ä¹ å’Œæ”¹è¿›

### åšå¾—å¥½çš„åœ°æ–¹
1. âœ… **æ¸…æ™°çš„æ¶æ„**: Repositoryæ¨¡å¼åˆ†ç¦»å…³æ³¨ç‚¹
2. âœ… **ç±»å‹å®‰å…¨**: TypeScript + Pydanticå…¨ç¨‹ä¿æŠ¤
3. âœ… **ç”¨æˆ·ä½“éªŒ**: å®Œå–„çš„åŠ è½½å’Œé”™è¯¯çŠ¶æ€
4. âœ… **ä»£ç å¤ç”¨**: RTK Queryå‡å°‘æ ·æ¿ä»£ç 

### å¯ä»¥æ”¹è¿›
1. ğŸ“ éœ€è¦æ›´å¤šçš„ä»£ç æ³¨é‡Š
2. ğŸ§ª éœ€è¦æ·»åŠ è‡ªåŠ¨åŒ–æµ‹è¯•
3. ğŸ“š APIæ–‡æ¡£å¯ä»¥æ›´è¯¦ç»†
4. âš¡ æŸäº›æŸ¥è¯¢å¯ä»¥ä¼˜åŒ–ï¼ˆN+1é—®é¢˜ï¼‰

---

## ğŸ“ API ç«¯ç‚¹æ€»è§ˆ

### è®¤è¯ (3ä¸ª)
- POST /api/v1/auth/register
- POST /api/v1/auth/login
- GET /api/v1/auth/me

### é¡¹ç›® (5ä¸ª)
- GET /api/v1/projects
- POST /api/v1/projects
- GET /api/v1/projects/{id}
- PATCH /api/v1/projects/{id}
- DELETE /api/v1/projects/{id}

### Run (10ä¸ª)
- GET /api/v1/runs
- POST /api/v1/runs
- GET /api/v1/runs/{id}
- PATCH /api/v1/runs/{id}
- DELETE /api/v1/runs/{id}
- POST /api/v1/runs/{id}/finish
- POST /api/v1/runs/{id}/heartbeat
- POST /api/v1/runs/{id}/tags
- DELETE /api/v1/runs/{id}/tags/{tag}

**æ€»è®¡**: 18ä¸ªAPIç«¯ç‚¹

---

## ğŸ‰ Sprint 2 æˆå°±è§£é”

âœ… **15+ APIç«¯ç‚¹å®ç°**
âœ… **2ä¸ªå®Œæ•´Repository**
âœ… **8ä¸ªPydantic Schema**
âœ… **3ä¸ªRTK QueryæœåŠ¡**
âœ… **å®Œæ•´çš„è®¤è¯æµç¨‹**
âœ… **åŠŸèƒ½å®Œå–„çš„é¡¹ç›®ç®¡ç†**
âœ… **1800+ è¡Œé«˜è´¨é‡ä»£ç **
âœ… **ä¼˜ç§€çš„ç”¨æˆ·ä½“éªŒ**

---

**Sprint 2 çŠ¶æ€**: âœ… **å®Œæˆ**

**å®Œæˆåº¦**: 85% (Runé¡µé¢å¾…å®Œå–„)

**ä¸‹ä¸€ä¸ªé‡Œç¨‹ç¢‘**: Sprint 3 - æŒ‡æ ‡ç³»ç»Ÿï¼ˆWeek 5-6ï¼‰

**é¢„è®¡å®Œæˆæ—¶é—´**: 2å‘¨

---

*ç”Ÿæˆäº: 2025-11-16*
*åˆ†æ”¯: claude/plan-experiment-management-01AvAiY7hrguDq919MLaqNvm*
*ä»£ç è¡Œæ•°: 1800+*
*APIç«¯ç‚¹: 18ä¸ª*
