# Production Environment Configuration for wanLLMDB
# Copy this file to .env and fill in the values with strong, unique credentials

# =============================================================================
# SECURITY SETTINGS (REQUIRED - NO DEFAULTS)
# =============================================================================

# JWT Secret Key (REQUIRED - minimum 32 characters)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=CHANGE_THIS_TO_STRONG_SECRET_MIN_32_CHARS_GENERATE_UNIQUE_VALUE

# JWT Algorithm (DO NOT CHANGE unless you know what you're doing)
ALGORITHM=HS256

# Token expiration times
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Admin users for audit log access and administrative operations
# Comma-separated list of admin usernames (e.g., "admin,tech_lead,manager")
# IMPORTANT: Only these users will have access to audit logs and admin endpoints
ADMIN_USERS=admin

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL credentials (REQUIRED)
POSTGRES_DB=wanllmdb
POSTGRES_USER=wanllm
POSTGRES_PASSWORD=CHANGE_THIS_TO_STRONG_DATABASE_PASSWORD

# PostgreSQL connection settings
POSTGRES_PORT=5432

# Database connection pool (optimized for production)
DATABASE_POOL_SIZE=50
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_RECYCLE=3600
DATABASE_POOL_PRE_PING=true

# =============================================================================
# REDIS CONFIGURATION (for JWT token blacklist)
# =============================================================================

# Redis password (REQUIRED)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(16))"
REDIS_PASSWORD=CHANGE_THIS_TO_STRONG_REDIS_PASSWORD

# Redis connection settings
REDIS_PORT=6379

# =============================================================================
# MINIO / S3 CONFIGURATION (REQUIRED)
# =============================================================================

# MinIO credentials (REQUIRED - minimum 12 characters each)
# ⚠️ DO NOT use 'minioadmin' or other default/common values
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(16))"
MINIO_ACCESS_KEY=CHANGE_THIS_MIN_12_CHARS_NO_DEFAULTS
MINIO_SECRET_KEY=CHANGE_THIS_MIN_12_CHARS_NO_DEFAULTS

# MinIO connection settings
MINIO_ENDPOINT=minio:9000
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_SECURE=false
MINIO_BUCKET_NAME=wanllmdb-artifacts
MINIO_BROWSER=on

# For external MinIO/S3 (AWS S3, DigitalOcean Spaces, etc.)
# MINIO_ENDPOINT=s3.amazonaws.com
# MINIO_SECURE=true

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Application environment
APP_ENV=production

# Backend port
BACKEND_PORT=8000

# CORS origins (comma-separated list of allowed origins)
# Example: https://app.example.com,https://admin.example.com
CORS_ORIGINS=https://your-frontend-domain.com

# Logging
LOG_LEVEL=INFO

# =============================================================================
# OPTIONAL SETTINGS
# =============================================================================

# Build metadata (for CI/CD)
VERSION=1.0.0
BUILD_DATE=
VCS_REF=

# Backup retention
BACKUP_RETENTION_DAYS=7

# =============================================================================
# VALIDATION CHECKLIST
# =============================================================================
# Before deploying to production, ensure:
# ✓ SECRET_KEY is at least 32 characters and unique
# ✓ POSTGRES_PASSWORD is strong and unique
# ✓ REDIS_PASSWORD is strong and unique
# ✓ MINIO_ACCESS_KEY is at least 12 characters and NOT 'minioadmin'
# ✓ MINIO_SECRET_KEY is at least 12 characters and NOT 'minioadmin'
# ✓ ADMIN_USERS is set to authorized admin usernames
# ✓ CORS_ORIGINS is set to your actual frontend domain(s)
# ✓ All passwords are stored securely (not in version control)
# ✓ .env file has appropriate permissions (chmod 600 .env)
# =============================================================================

# Quick validation command:
# docker-compose -f docker-compose.prod.yml config
